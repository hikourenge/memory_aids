<div class="max-w-5xl mx-auto px-4 py-8">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900">
      <%= t('.title') %>
    </h1>
  </div>

  <article class="rounded-lg bg-white shadow">
    <div class="p-6">
      <div class="flex flex-col gap-6 md:flex-row">
        <!-- 画像 -->
        <div class="md:w-1/3">
            <%= image_tag @deck.deck_image_url, width: 300, height: 200, class: "h-auto w-full rounded-md object-cover" %>
        </div>

        <!-- タイトル・メタ情報・操作ボタン -->
        <div class="flex-1 space-y-2">
          <div class="flex flex-wrap items-start gap-2">
            <h3 class="text-xl font-semibold text-gray-900">
              <%= @deck.title %>
            </h3>

            <!-- ステータスバッジ -->
              <% if @deck.status_published? %>
                    <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-green-100 text-green-800">
                     公開
                    </span>
                  <% else %>
                    <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-800">
                      非公開
                    </span>
                  <% end %>
          </div>

          <!-- 投稿者・日時など -->
          <ul class="flex flex-wrap gap-4 text-xs text-gray-500">
            <li>
              by <%= @deck.user.name %>
            </li>
            <li>
              <%= l @deck.created_at, format: :long %>
            </li>
          </ul>

          <!-- 編集・削除ボタン -->
        <% if user_signed_in? && current_user.own?(@deck) %>
          <div class="mt-2 flex justify-end gap-2">
            <%= link_to edit_deck_path(@deck),
                  id: "button-edit-#{@deck.id}",
                  class: "inline-flex items-center rounded-md border border-gray-300 px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-50" do %>
              <%= heroicon "pencil-square", variant: "solid", class: "h-4 w-4 text-gray-600" %>
              編集
            <% end %>

            <%= link_to deck_path(@deck),
                  id: "button-delete-#{@deck.id}",
                  data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" },
                  class: "inline-flex items-center rounded-md border border-red-300 px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50" do %>
               <%= heroicon "trash", variant: "solid", class: "h-4 w-4 text-gray-600" %>
              削除
            <% end %>
             </div>
                <div class="mt-6 border-t pt-4">
                    <div class="text-sm font-semibold text-gray-700 mb-1">
                    共有用URL
                    </div>
                    <div class="text-xs text-gray-700">
                        <div class="rounded-md border border-gray-300 bg-gray-50 px-3 py-2 break-all font-mono">
                            <%= deck_url(@deck) %>
                        </div>
                    </div>
                </div>
             <% end %>
        </div>
      </div>

      <!-- 説明文 -->
      <div class="mt-6 border-t pt-4">
        <div class="text-sm font-semibold text-gray-700 mb-1">
          <%= t('.description') %>
        </div>
        <div class="text-gray-800 leading-relaxed text-sm">
          <%= simple_format(@deck.description) %>
        </div>
      </div>
    <!-- カード -->
            <div class="mt-6 border-t pt-4">
        <div class="text-sm font-semibold text-gray-700 mb-1">
          <%= t('.card.index') %>
        </div>
        <div class="text-gray-800 leading-relaxed text-sm">
          <%= render 'cards/card', cards:@cards, deck: @deck %>
          <%= link_to new_deck_card_path(@deck),
                  class: "inline-flex items-center rounded-md border border-gray-300 px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-50" do %>
              カード登録
            <% end %>
        </div>
      </div>
    </div>
  </article>
</div>
